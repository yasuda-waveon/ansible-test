name: Test Unreal Engine Playbook

on:
  workflow_dispatch: # 手動実行用
  pull_request:      # PR作成時に自動テスト
    paths:
      - 'ansible/roles/unreal_engine/**'
      - 'ansible/co-location-development.yaml'

jobs:
  test-playbook:
    # GitHub Hosted Runner (Ubuntu) を使用することで、設定なしで即座に実行可能です
    runs-on: ubuntu-latest
    
    defaults:
      run:
        working-directory: ./ansible

    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Install Ansible dependencies
        run: pip install ansible pywinrm

      - name: Syntax Check
        run: ansible-playbook -i co-location-development.yaml site.yaml --syntax-check
